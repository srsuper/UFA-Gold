(window.webpackJsonp=window.webpackJsonp||[]).push([["welcomeGreeting"],{"/FrS":function(e,t,a){"use strict";var n,i,r;a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),function(e){e[e.HomeFromCookie=1]="HomeFromCookie",e[e.HomeFromPdp=2]="HomeFromPdp",e[e.HomeFromUserSet=3]="HomeFromUserSet"}(n||(n={})),function(e){e[e.DetectCurrentLocation=1]="DetectCurrentLocation",e[e.SpecifyLocation=2]="SpecifyLocation"}(i||(i={})),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(r||(r={}));const o={WeatherSpartanHomeLocationCookie:"weaSpartanHomeLocation",WeatherHomeLocationCookie:"weaPeregrineHomeLocation",WeatherSpartanDegreeSettingCookie:"weaSpartanDegreeType",WeatherDegreeSettingCookie:"weaPeregrineDegreeType",WeatherSpartanDetectLocationSetting:"weaDetectLocation",WeatherDetectLocationSetting:"weaPeregrineDetectLocation",WeatherSpartanRecentLocationCookie:"weaSpartanRecentLocations",WeatherRecentLocationCookie:"weaPeregrineRecentLocations",WeatherSpartanFavoriteLocationCookie:"weaSpartanFavoriteLocations",WeatherFavoriteLocationCookie:"weaPeregrineFavoriteLocations",EnglishLocationMarkets:"en-",cookieExpirationTimeInDays:365,cookieDomain:"msn.com"}},"6fq4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("HDSB");let i=!1;Object(n.a)()&&(window.addEventListener("keydown",()=>{i=!0}),window.addEventListener("mousedown",()=>{i=!1}))},"7oW3":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("G82u");class i{}i.updateLocationDisplayName=new n.a("UpdateLocationDisplayName"),i.fetchWeatherSummarySuccess=new n.a("FetchWeatherSummarySuccess"),i.updateLocationDetectionState=new n.a("UpdateLocationDetectionState"),i.updateWeatherUserProfile=new n.a("UpdateWeatherUserProfile")},B9k1:function(e,t){},JbJS:function(e,t){},Rlhs:function(e,t,a){"use strict";a.r(t),a.d(t,"ToolingInfo",(function(){return $})),a.d(t,"WelcomeGreeting",(function(){return X})),a.d(t,"WelcomeGreetingActions",(function(){return k})),a.d(t,"WelcomeGreetingReducer",(function(){return Y})),a.d(t,"WelcomeGreetingConnector",(function(){return _}));var n=a("JbJS"),i=a("ERkP"),r=a("5mwN"),o=a("wirn"),s=a("6fq4"),c=a("qGiF"),h=a("mwRD");const l="weather_today",d="degree_switch",g="weather",p="prg-grealert",u="weaalert",m="i_welcome",w="i_weather";var y=a("YJhp");const S={23:y.a.RainShowersDay,26:y.a.SnowShowersDay,6:y.a.BlowingHail,5:y.a.Cloudy,20:y.a.LightSnow,91:y.a.Windy,27:y.a.Thunderstorms,10:y.a.FreezingRain,77:y.a.RainShowersDay,12:y.a.HazeSmoke,24:y.a.RainSnow,78:y.a.RainSnowShowersNight,9:y.a.Fog,3:y.a.PartlyCloudyDay,43:y.a.HailNight,16:y.a.HailDay,8:y.a.LightRain,15:y.a.HeavySnow,28:y.a.ClearNight,30:y.a.PartlyCloudyNight,14:y.a.ModerateRain,1:y.a.SunnyDay,7:y.a.BlowingSnow,50:y.a.RainShowersNight,82:y.a.SnowShowersNight},D={23:y.a.RainShowersDayWhite,26:y.a.SnowShowersDayWhite,6:y.a.BlowingHailWhite,5:y.a.CloudyWhite,20:y.a.LightSnowWhite,91:y.a.WindyWhite,27:y.a.ThunderstormsWhite,10:y.a.FreezingRainWhite,77:y.a.RainShowersDayWhite,12:y.a.HazeSmokeWhite,24:y.a.RainSnowWhite,78:y.a.RainSnowShowersNightWhite,9:y.a.FogWhite,3:y.a.PartlyCloudyDayWhite,43:y.a.HailNightWhite,16:y.a.HailDayWhite,8:y.a.LightRainWhite,15:y.a.HeavySnowWhite,28:y.a.ClearNightWhite,30:y.a.PartlyCloudyNightWhite,14:y.a.ModerateRainWhite,1:y.a.SunnyDayWhite,7:y.a.BlowingSnowWhite,50:y.a.RainShowersNightWhite,82:y.a.SnowShowersNightWhite},f={17:"8",31:"30",49:"14",41:"14",35:"8",4:"3",19:"8",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"1",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"12",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"28",102:"28",44:"8",46:"8",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"12",13:"8"};var C=a("6u3Q");class b extends r.a{constructor(e,...t){super(e,...t,!0),this.handledProps=Object.assign(Object.assign({},r.b),{canDisplayGreetingModule:void 0,greetingFadeIn:void 0,isBackgroundDark:void 0,managedClasses:void 0,shouldAnimationStart:void 0,switchDegreeUnits:void 0,weatherProps:void 0,welcomeText:void 0}),this.onDegreeUnitClick=e=>{e.preventDefault(),this.props.switchDegreeUnits(this.props.weatherProps.alternateDegreeButtonProps.children.toString())},this.weatherUnitToggleRef=i.createRef(),this.state={showHiddenUnitContainer:!1}}componentDidUpdate(e){if(this.props.canDisplayGreetingModule&&this.props.shouldAnimationStart!==e.shouldAnimationStart){const e=document.getElementById(m),t=document.getElementById(w);this.props.greetingFadeIn(e,t,0,700)}}render(){if(this.props.canDisplayGreetingModule){super.render();const{isBackgroundDark:e,welcomeText:t}=this.props,a=e?this.props.managedClasses.textWrapper_ImageDisplayed:this.props.managedClasses.textWrapper_ImageHidden;return i.createElement("div",Object.assign({},this.unhandledProps(),{className:super.generateClassNames(this.props.managedClasses.greeting_root)}),this.renderWeather(e,a),i.createElement("div",{className:a},i.createElement("span",{id:m,className:this.props.managedClasses.welcomeText},t)))}return null}renderWeather(e,t){const{alertGlyph:a,weatherAlert:n,weatherGlyph:r,weatherLink:s,weatherText:h,weatherTelemetryTags:l,degreeUnit:d}=this.props.weatherProps;return i.createElement("a",Object.assign({},l,{href:s,className:this.props.managedClasses.weather_container+" "+t,id:w,onBlur:()=>{this.controlHiddenUnit(!1)},onFocus:this.onWeatherFocus.bind(this),onMouseOver:()=>{this.controlHiddenUnit(!0)},onMouseLeave:()=>{this.controlHiddenUnit(!1)}}),this.renderAlert(a,n),i.createElement(c.a,null,t=>r&&r.imageSkyCode&&r.ariaLabel&&i.createElement("div",{className:this.props.managedClasses.weatherGlyph},i.createElement(o.a,{ariaLabel:r.ariaLabel,glyphType:this.getImage(t,e,r.imageSkyCode)}))),i.createElement("span",{className:this.props.managedClasses.weatherText},h),i.createElement("div",{className:this.props.managedClasses.weatherUnit_container},i.createElement("span",null,d),d&&(d.includes("C")||d.includes("F"))?this.renderHiddenUnitToggle():null))}renderHiddenUnitToggle(){const{alternateDegreeButtonProps:e}=this.props.weatherProps;return i.createElement("span",{className:this.state.showHiddenUnitContainer?this.props.managedClasses.visibleUnit_container:this.props.managedClasses.hiddenUnit_container},i.createElement("span",{className:this.props.managedClasses.unitDivider},"|"),i.createElement(h.a,Object.assign({},e,{className:this.props.managedClasses.alternateUnitText,onClick:this.onDegreeUnitClick,ref:this.weatherUnitToggleRef})))}renderAlert(e,t){return e?i.createElement("div",{className:this.props.managedClasses.weatherAlert},i.createElement(o.a,{className:this.props.managedClasses.weatherAlertIcon,glyphType:e,ariaLabel:t})):null}onWeatherFocus(){s.a&&this.controlHiddenUnit(!0)}controlHiddenUnit(e){this.setState({showHiddenUnitContainer:e})}getImage(e,t,a){return function(e,t){const a=Object.prototype.hasOwnProperty.call(f,e)?f[e]:e;return(t?D:S)[a]}(a,Object(C.e)(e)||t)}}b.defaultProps={experienceName:"WelcomeGreeting"};var W=a("G82u");class k{}k.updateIsImageEnabled=new W.a("UpdateIsImageEnabled"),k.updateWeatherData=new W.a("UpdateWeatherData"),k.shouldAnimationStart=new W.a("ShouldAnimationStart"),k.disableGreetingModule=new W.a("DisableGreetingFeature");var v=a("ubYE"),x=a("D57K"),O=a("HHhA"),A=a("mL67"),T=a("jE1l"),U=a("9J8d"),j=a("u5KZ"),L=a("Am8i"),F=a("/FrS"),H=a("7oW3"),N=a("pLgf"),G=a("WfnD"),E=a("s9+9"),I=a("I6Lx"),P=a("eoyk"),R=a("kpPY");function B(e,t){if(!t||t.accountType==T.c.NO_ACCOUNT)return"";const{localizedStrings:a}=e,n=e.isNameInGreeting?function(e,t){const{localizedStrings:a}=e;if(t){const n=t.firstName,i=t.lastName;return e.showFirstNameOnly?n:e.showLastNameOnly?i:Object(R.a)(a.nameOrderingFull,n,i)}return""}(e,t):"";let i=a.welcomeText;return function(e){let t=0;for(const a of e.greetingsList){if(t>a.startHour||a.endHour<a.startHour)return!1;t=a.endHour}return!0}(e)&&(i=function(e,t){const{localizedStrings:a}=e;for(const n of e.greetingsList)if(t>=n.startHour&&t<n.endHour)return a[n.displayKey];return a.welcomeText}(e,(new Date).getHours())),n&&n.length<=e.maxNameCharacterCount&&a.greetingFormat&&(i=Object(R.a)(a.greetingFormat,i,n)),i}const M={inspect:e=>{const{config:t,state:a,connectorArgs:n}=e,i=n.weatherDegreeSwitchTelemetryObject&&n.weatherDegreeSwitchTelemetryObject.render();return{props:{canDisplayGreetingModule:n.canDisplayGreetingModule,greetingFadeIn:n.startGreetingAnimation,isBackgroundDark:a.isBackgroundDark,shouldAnimationStart:a.shouldAnimationStart,switchDegreeUnits:n.switchDegreeUnits,weatherProps:{alternateDegreeButtonProps:Object.assign(Object.assign({},i),{children:a.alternateDegreeUnit}),degreeUnit:a.degreeUnit,weatherAlert:a.weatherAlert,alertGlyph:a.alertGlyph,weatherGlyph:a.weatherGlyph,weatherText:a.weatherText,weatherLink:a.weatherLink,weatherTelemetryTags:n.weatherTelemetryObject&&n.weatherTelemetryObject.render()},welcomeText:B(t,n.accountSettings)},missingChildren:[]}}};class _ extends G.a{constructor(e,t,a,n,i,r,o){super(e,t,a,n,i,r,o),this.animationDelayDefault=2e3,this.updateWeatherDataState=()=>{const e=this.weatherDataConnector.getCurrentState();this.sendWeatherUpdateActions(e)},this.switchDegreeUnits=e=>Object(x.b)(this,void 0,void 0,(function*(){const t=e.includes("C")?F.d.Celsius:F.d.Fahrenheit,a=this.weatherDataConnector.getCurrentState();this.weatherDataConnector.updateSettingsAndFetch(a.locationDetectionSetting,a.currentLocation,t),this.trackExperienceChangesForPageReveal()})),this.getTelemetryObject=(e,t,a,n,i,r,o)=>e.addOrUpdateChild({name:t,behavior:a,content:{headline:o||t,type:n,vertical:i},destinationUrl:r||""}),this.pageSettingsDataConnector=a.connector(E.a.ChromiumPageSettings),this.pageSettingsDataConnector||(this.pageSettingsDataConnector=new O.a(E.a.ChromiumPageSettings,"",a,new A.a,i,void 0,o))}updateWeatherIconFromStateChange(e){const t=e&&e.params;!t||t.length<1||(this.isBackgroundDark=t[0].imageOfTheDayEnabled,void 0!==t[0].isNtpThemeBackgroundDark&&(this.isBackgroundDark=t[0].isNtpThemeBackgroundDark),k.updateIsImageEnabled.getActionSender(this).send(this.isBackgroundDark))}startAnimationWithDelay(e){setTimeout(()=>{k.shouldAnimationStart.getActionSender(this).send(!0)},e)}sendWeatherUpdateActions(e){e.currentCondition&&(this.trackAlertFlightTmpl(e.alertsInfo&&e.alertsInfo.title),k.updateWeatherData.getActionSender(this).send(e.currentCondition,this.config.enableWeatherAlert?e.alertsInfo:void 0))}trackAlertFlightTmpl(e){if(!this.isAlertIconFlightChecked&&e){if(I.b.CurrentFlights&&I.b.CurrentFlights.indexOf(p)>-1){const e=I.b.CurrentFlights.split(",").find(e=>e.startsWith(p,0));j.a.addOrUpdateTmplProperty(u,e)}this.isAlertIconFlightChecked=!0}}mapStateToProps(e){const t=this.getTelemetryObject(this.telemetryObject,l,L.b.Navigate,L.c.StructuredData,g,e.weatherLink,e.weatherText+e.degreeUnit+"|"+e.alternateDegreeUnit),a=this.getTelemetryObject(t,d,L.b.Customize,L.c.StructuredData,g,"",e.alternateDegreeUnit),n={config:this.config,state:e,connectorArgs:{weatherTelemetryObject:t,weatherDegreeSwitchTelemetryObject:a,startGreetingAnimation:z,canDisplayGreetingModule:this.canDisplayGreetingModule,accountSettings:this.primaryAccountSettings,switchDegreeUnits:this.switchDegreeUnits}},i=M.inspect(n);return Object.assign(Object.assign({},i.props),this.telemetryTags)}onComponentConnect(e){return Object(x.b)(this,void 0,void 0,(function*(){yield G.a.prototype.onComponentConnect.call(this,e);const t=I.b.ClientSettings,a=this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getCurrentState();let n=a&&a.configData;this.pageSettingsDataConnector&&void 0===n&&(n=yield this.pageSettingsDataConnector.getConfigDataAsync()),this.telemetryObject&&this.telemetryObject.contract&&(this.telemetryObject.contract.behavior=L.b.Show,this.telemetryObject.contract.destinationUrl=location?location.href:"");"true"!==t.static_page&&n.isNewTabGreetingEnabled&&(this.primaryAccountSettings=a.primaryAccountInfo,this.canDisplayGreetingModule=this.primaryAccountSettings.accountType===T.c.MSA),this.canDisplayGreetingModule||k.disableGreetingModule.getActionSender(this).send(!0),U.a.getInstance().rootReducer.getDataConnector(E.a.WeatherData).then(e=>Object(x.b)(this,void 0,void 0,(function*(){e&&(this.weatherDataConnector=e,this.getWeatherData())})))}))}revalidateExperienceStaleState(e){const t=Object.create(null,{revalidateExperienceStaleState:{get:()=>super.revalidateExperienceStaleState}});return Object(x.b)(this,void 0,void 0,(function*(){t.revalidateExperienceStaleState.call(this,e),e&&this.getWeatherData()}))}getWeatherData(){this.setupWeatherDataObservers(),this.weatherDataConnector.fetchActiveStateforWeather().then(e=>Object(x.b)(this,void 0,void 0,(function*(){if(this.config.hasWhiteIconTransitions){const e=yield this.pageSettingsDataConnector.getPageSettingsStateAsync();this.isBackgroundDark=e.imageOfTheDayEnabled,void 0!==e.isNtpThemeBackgroundDark&&(this.isBackgroundDark=e.isNtpThemeBackgroundDark),k.updateIsImageEnabled.getActionSender(this).send(this.isBackgroundDark),P.a.updateLayout.registerObserver(e=>{this.updateWeatherIconFromStateChange(e)})}if(e){const e=this.weatherDataConnector.getCurrentState();this.sendWeatherUpdateActions(e),this.startAnimationWithDelay(this.config.animationDelay||this.animationDelayDefault),this.telemetryObject&&this.telemetryObject.contract&&e.currentCondition&&(this.telemetryObject.contract.destinationUrl=e.currentCondition.deepLink?e.currentCondition.deepLink:this.telemetryObject.contract.destinationUrl,e.currentCondition.currentTemperature&&e.currentCondition.degreeSetting&&e.currentCondition.alternateDegreeSetting&&(this.telemetryObject.contract=Object.assign(Object.assign({},this.telemetryObject.contract),{content:{headline:e.currentCondition.currentTemperature+e.currentCondition.degreeSetting+"|"+e.currentCondition.alternateDegreeSetting}})))}})))}setupWeatherDataObservers(){H.a.fetchWeatherSummarySuccess.registerObserver(this.updateWeatherDataState)}}function z(e,t,a,n){const i=new N.AnimateTo(e,{opacity:0},{duration:n,delay:a}),r=new N.AnimateTo(t,{opacity:1},{duration:n,delay:0});i.onFinish=()=>{window.requestAnimationFrame(()=>{e.style.display="none",t.style.display="flex",i.cancel(),r.play()})},i.play()}var J=a("05Au");class Y{reduce(e,t){if(!e)return{};let a,n=!1;return t?(n=n||J.a.handleAction(t,k.updateIsImageEnabled,t=>{a=Object.assign(Object.assign({},e),{isBackgroundDark:t})}),n=n||J.a.handleAction(t,k.updateWeatherData,(t,n)=>{let i=void 0;n&&("Y"==n.significance?i=y.a.WeatherAdvisory:"O"==n.significance?i=y.a.WeatherWatch:"R"==n.significance&&(i=y.a.WeatherWarning)),a=Object.assign(Object.assign({},e),{weatherAlert:n&&n.title,alertGlyph:i,weatherGlyph:{imageSkyCode:t.pvdrIcon,ariaLabel:t.image&&t.image.alt},weatherText:t.currentTemperature,weatherLink:t.deepLink,degreeUnit:t.degreeSetting,alternateDegreeUnit:t.alternateDegreeSetting})}),n=n||J.a.handleAction(t,k.shouldAnimationStart,t=>{a=Object.assign(Object.assign({},e),{shouldAnimationStart:t})}),n=n||J.a.handleAction(t,k.disableGreetingModule,t=>{a=Object.assign(Object.assign({},e),{canDisplayGreetingModule:!t})}),a||e):e}}var q=a("rRWH");const K={alternateUnitText:{background:"transparent !important",border:"none !important",color:"inherit !important",height:"fit-content !important","line-height":"inherit !important","min-width":"0px !important",opacity:"inherit",padding:"0px !important","text-decoration":"none","&:focus":{opacity:"1",outline:"1px solid !important"},"&:hover":{opacity:"1"}},hiddenUnit_container:{display:"flex",opacity:"0",visibility:"hidden"},visibleUnit_container:{display:"flex",opacity:"0.75",visibility:""},greeting_root:{display:"flex","font-size":"14px",height:"50px",width:"fit-content"},textWrapper_ImageHidden:{color:a("SP+O").c},textWrapper_ImageDisplayed:{color:"#FFFFFF"},weatherAlert:{float:"left","margin-bottom":"auto","margin-top":"auto",height:"24px",width:"24px","margin-inline-end":"3px"},weatherAlertIcon:{"vertical-align":"middle"},weatherGlyph:{float:"left",height:"24px","margin-bottom":"auto","margin-top":"auto",width:"24px"},weather_container:{display:"none",opacity:"0",padding:"0px 5px 0px 5px","text-decoration":"none"},weatherUnit_container:{display:"flex","padding-top":"13px",width:"max-content"},weatherText:{"font-size":"24px","margin-bottom":"auto","margin-top":"auto",padding:Object(q.c)("0px 4px 3px 10px","0px 10px 3px 4px")},welcomeText:{display:"flex","font-size":"14px","line-height":"20px","margin-bottom":"auto","padding-top":"5px",opacity:"1","white-space":"pre-wrap",width:"120px"},unitDivider:{"font-size":"11px",opacity:"inherit",margin:"1px 8px 0px 8px"}};var Z=a("+viU"),Q=a("B9k1"),V=a("ZG2z");const X=Object(Z.a)(K)(b),$={reactComponent:X,experienceConfigSchema:v.WelcomeGreetingConfigSchema,defaultMockState:n.mockDefaultState,mockState:n.mockState,mockConfig:Q.mockConfig,mockConnectorArgs:V.mockConnectorArgs,inspector:M.inspect}},ZG2z:function(e,t){},ubYE:function(e,t){}}]);